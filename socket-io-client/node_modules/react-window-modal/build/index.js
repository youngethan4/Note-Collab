!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.WindowModal=t(require("react")):e.WindowModal=t(e.react)}(window,function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(t,n){t.exports=e},function(e,t,n){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowModalEvent=class extends Event{get windowModal(){return this._windowModal}constructor(e,t){super(e,{bubbles:!0,cancelable:!1}),this._windowModal=t}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(2));t.Component=class{get element(){return this._element}set element(e){this._element=e,this.addChildren()}constructor(e=[]){o.default(this),this.children=e,this.element=document.createElement("div")}setParent(e){const{element:t}=this;t&&e.addChild(this)}addChild(e,t){const{element:n}=this,i=e.element;if(!n||!i)return;const{children:o}=n;"number"==typeof t&&o.length>t?n.insertBefore(i,o[t]):n.appendChild(i),this.children.find(t=>e===t)||this.children.push(e)}removeChild(e){const{element:t}=this,n=e.element;if(!t||!n)return;t.removeChild(e.element);const i=this.children.findIndex(t=>e===t);i||this.children.splice(i,1)}withStyle(e){return this.setStyle(e),this}setStyle(e){const{element:t}=this;t&&Object.keys(e).forEach(n=>t.style[n]=e[n])}setClassName(e){const{element:t}=this;t&&e&&(t.className=e.trim())}withClassname(e){return this.setClassName(e),this}addEventListener(e,t){this.element.addEventListener(...arguments)}removeEventListener(e,t){this.element.removeEventListener(...arguments)}addChildren(){const{element:e}=this;e&&this.children.forEach(t=>{try{if(e.contains(t))return}catch(e){}t instanceof HTMLElement||t instanceof Node?e.appendChild(t):"string"!=typeof t?t.setParent(this):e.appendChild(document.createTextNode(t))})}}},function(e,t,n){"use strict";e.exports=((e,t)=>{t=Object.assign({},t);const n=e=>{const n=t=>"string"==typeof t?e===t:t.test(e);return t.include?t.include.some(n):!t.exclude||!t.exclude.some(n)};for(const[t,i]of(e=>{const t=new Set;do{for(const n of Reflect.ownKeys(e))t.add([e,n])}while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t})(e.constructor.prototype)){if("constructor"===i||!n(i))continue;const o=Reflect.getOwnPropertyDescriptor(t,i);o&&"function"==typeof o.value&&(e[i]=e[i].bind(e))}return e});const i=["componentWillMount","UNSAFE_componentWillMount","render","getSnapshotBeforeUpdate","componentDidMount","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","UNSAFE_componentWillUpdate","componentDidUpdate","componentWillUnmount","componentDidCatch","setState","forceUpdate"];e.exports.react=((t,n)=>((n=Object.assign({},n)).exclude=(n.exclude||[]).concat(i),e.exports(t,n)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.Div=class extends i.Component{constructor(e=[],t=""){super(e),this.element=document.createElement("div"),this.withClassname(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.WindowModalCloseEvent=class extends i.WindowModalEvent{constructor(e){super("close",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.WindowModalBlurEvent=class extends i.WindowModalEvent{constructor(e){super("blur",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.WindowModalFocusEvent=class extends i.WindowModalEvent{constructor(e){super("focus",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.WindowModalMinimizeEvent=class extends i.WindowModalEvent{constructor(e){super("minimize",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.WindowModalMoveEvent=class extends i.WindowModalEvent{get oldPos(){return this._oldPos}get newPos(){return this._newPos}constructor(e,t,n){super("move",e),this._oldPos=t,this._newPos=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.WindowModalResizeEvent=class extends i.WindowModalEvent{get oldsize(){return this._oldSize}get newSize(){return this._newSize}constructor(e,t,n){super("resize",e),this._oldSize=t,this._newSize=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.WindowModalUnminimizeEvent=class extends i.WindowModalEvent{constructor(e){super("unminimize",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(12);const i=n(17);t.default=i.WindowModal;var o=n(4);t.WindowModalCloseEvent=o.WindowModalCloseEvent;var s=n(5);t.WindowModalBlurEvent=s.WindowModalBlurEvent;var r=n(6);t.WindowModalFocusEvent=r.WindowModalFocusEvent;var l=n(7);t.WindowModalMinimizeEvent=l.WindowModalMinimizeEvent;var d=n(10);t.WindowModalUnminimizeEvent=d.WindowModalUnminimizeEvent;var a=n(9);t.WindowModalResizeEvent=a.WindowModalResizeEvent;var c=n(8);t.WindowModalMoveEvent=c.WindowModalMoveEvent},function(e,t,n){var i=n(13);"string"==typeof i&&(i=[[e.i,i,""]]),n(15)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(14)(!1)).push([e.i,".WindowModal {\n  display: flex;\n  flex-direction: column;\n  transition: all 0.05s ease;\n  position: absolute;\n  background-color: white;\n  padding: 0;\n  box-shadow: 1px 2px 8px rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n}\n.WindowModal-content {\n  position: relative;\n  display: flex;\n  padding: 0 4px;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.WindowModal-icon {\n  width: 1.25em;\n  height: 1.25em;\n  margin: 0 4px;\n  overflow: hidden;\n}\n.WindowModal-title {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 4px;\n  font-weight: bold;\n  font-size: 14px;\n}\n.WindowModal-buttons {\n  display: flex;\n  padding: 2px;\n}\n.WindowModal-bar {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: row;\n  padding: 4px 0;\n  min-height: 24px;\n  background-color: white;\n  cursor: pointer;\n  user-select: none;\n  box-shadow: 1px 2px 8px rgba(0, 0, 0, 0.2);\n}\n.WindowModal-bar-spacer {\n  flex-grow: 10;\n}\n.WindowModal-bar--compact {\n  padding: 1px;\n  min-height: 16px;\n}\n.WindowModal-bar--compact .WindowModal-button {\n  padding: 0px;\n  margin: 0 1px;\n  font-size: 8px;\n  width: 16px;\n  height: 16px;\n}\n.WindowModal-bar--compact .WindowModal-buttons {\n  padding: 0;\n}\n.WindowModal-bar--compact .WindowModal-title {\n  font-size: 12px;\n  margin: 0 2px;\n}\n.WindowModal-button {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  margin: 0 2px;\n  background-color: #FDFDFD;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  font-weight: bold;\n  font-size: 12px;\n  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);\n  text-align: center;\n}\n.WindowModal-button:hover {\n  box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.25);\n  border-color: rgba(0, 0, 0, 0.25);\n  filter: brightness(120%);\n}\n.WindowModal-button:focus {\n  outline: 0;\n}\n.WindowModal-button--minimize {\n  font-weight: 1000;\n  font-family: Arial;\n}\n.WindowModal-button--close {\n  background-color: #b30000;\n  color: white;\n  font-weight: 300;\n  font-family: Arial, sans-serif;\n}\n.WindowModal-minimizeBar {\n  display: flex;\n  flex-direction: row;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background: transparent;\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n,i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var s=(n=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),r=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[i].concat(r).concat([s]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(o=0;o<e.length;o++){var r=e[o];null!=r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(e,t,n){var i,o,s={},r=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var i=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),d=null,a=0,c=[],u=n(16);function h(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=s[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(M(i.parts[r],t))}else{var l=[];for(r=0;r<i.parts.length;r++)l.push(M(i.parts[r],t));s[i.id]={id:i.id,refs:1,parts:l}}}}function m(e,t){for(var n=[],i={},o=0;o<e.length;o++){var s=e[o],r=t.base?s[0]+t.base:s[0],l={css:s[1],media:s[2],sourceMap:s[3]};i[r]?i[r].parts.push(l):n.push(i[r]={id:r,parts:[l]})}return n}function p(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=c[c.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertAt.before,n);n.insertBefore(t,o)}}function f(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function w(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=n.nc;i&&(e.attrs.nonce=i)}return v(t,e.attrs),p(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function M(e,t){var n,i,o,s;if(t.transform&&e.css){if(!(s="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=s}if(t.singleton){var r=a++;n=d||(d=w(t)),i=g.bind(null,n,r,!1),o=g.bind(null,n,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),p(e,t),t}(t),i=function(e,t,n){var i=n.css,o=n.sourceMap,s=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||s)&&(i=u(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([i],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(r),l&&URL.revokeObjectURL(l)}.bind(null,n,t),o=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=w(t),i=function(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){f(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=m(e,t);return h(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var r=n[o];(l=s[r.id]).refs--,i.push(l)}for(e&&h(m(e,t),t),o=0;o<i.length;o++){var l;if(0===(l=i[o]).refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete s[l.id]}}}};var b,y=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function g(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var s=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,s=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(o=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:i+s.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(2)),s=n(4),r=n(5),l=n(6),d=n(7),a=n(8),c=n(9),u=n(10),h=n(18),m=n(3),p=n(1),f=n(19),w=n(20),v=n(21);t.WindowModal=class extends p.Component{constructor(e={}){super(),this._size={x:w.MIN_WINDOW_SIZE,y:w.MIN_WINDOW_SIZE},this._minimized=!1,this._pos=h.Point.zero,this._resizable=!0,this._movable=!0,this._focused=!0,this._mousePos=h.Point.zero,o.default(this);const t=document.querySelector("#WindowModal-minimizeBar");if(t?this.minimizeBar=new f.MinimizeBar(t):(this.minimizeBar=new f.MinimizeBar,document.body.appendChild(this.minimizeBar.element)),this._title="",e.title){if("string"!=typeof e.title)throw new Error("Invalid elementSelector specified for window-modal: "+e.title);this._title=e.title}if(e.pos){if("object"!=typeof e.pos)throw new Error("Invalid pos specified for window-modal");this._pos=e.pos}if(e.size){if("object"!=typeof e.size)throw new Error("Invalid pos specified for window-modal");this._size=e.size}this.resizable=!0,!1===e.resizable&&(this.resizable=!1),this.movable=!0,!1===e.movable&&(this.resizable=!1);const{elementSelector:n}=e;let i;if(n){if("string"!=typeof n)throw new Error("Invalid elementSelector specified for window-modal: "+n);this.content=null,i=this.hijackElement(n)}else i=document.createElement("div"),document.body.appendChild(i),this.content=new m.Div;this.element=i,this.element.className="WindowModal",this.resizeHandler=new w.WindowResizeHandler(this),this.windowBar=new v.WindowBar(Object.assign({window:this},e)),this.addChild(this.windowBar),this.content=this.content.withClassname("WindowModal-content"),this.addChild(this.content),this._oldContentDisplay=this.content.element.style.display||"block",this.updateElement(),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("select",this.onSelectStart),window.addEventListener("mouseenter",this.onMouseEnter)}get mousePos(){return this._mousePos}get size(){return this._size}set size(e){e.x<w.MIN_WINDOW_SIZE||e.y<w.MIN_WINDOW_SIZE||this.element.dispatchEvent(new c.WindowModalResizeEvent(this,this._size,e))&&(this._size=e,this.updateElement())}get pos(){return this._pos}set pos(e){this.element.dispatchEvent(new a.WindowModalMoveEvent(this,this._pos,e))&&(this._pos=e,this.updateElement())}get focused(){return this._focused}set focused(e){if(!this._focused&&e){if(!this.element.dispatchEvent(new l.WindowModalFocusEvent(this)))return}else if(this._focused&&!e&&!this.element.dispatchEvent(new r.WindowModalBlurEvent(this)))return;this._focused=e,this.updateElement()}get resizable(){return this._resizable}set resizable(e){this._resizable=e,this.updateElement()}get movable(){return this._movable}set movable(e){this._movable=e,this.updateElement()}get title(){return this._title}set title(e){this.windowBar.setTitle(e),this._title=e}set icon(e){this.windowBar.setIcon(e)}set compact(e){this.windowBar.setCompact(e)}set hideClose(e){this.windowBar.setHideClose(e)}set hideMinimize(e){this.windowBar.setHideMinimize(e)}get moving(){return this.windowBar.moving}get resizing(){return Boolean(this.resizeHandler.resizing)}get minimized(){return this._minimized}get unminimized(){return!this._minimized}getWindowBar(){return this.windowBar}destroy(){this.element.dispatchEvent(new s.WindowModalCloseEvent(this))&&(window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("select",this.onSelectStart),window.removeEventListener("mouseenter",this.onMouseEnter),this.element.remove(),this.windowBar.destroy(),delete this.element,delete this.children)}minimize(){if(this.minimized)return void this.unminimize();if(!this.element.dispatchEvent(new d.WindowModalMinimizeEvent(this)))return;const e=this.getMinimizePos();this.setStyle({transition:"all 0.5s ease",width:"200px",height:"30px",left:h.addPx(e.x),top:h.addPx(e.y)}),this._oldContentDisplay=this.content.element.style.display||"block",this.content.setStyle({display:"none"}),this.windowBar.minimize(),this._minimized=!0,setTimeout(()=>{document.body.removeChild(this.element),this.minimizeBar.element.appendChild(this.element),this.setStyle({position:"static"})},500)}unminimize(e){if(!this.element.dispatchEvent(new u.WindowModalUnminimizeEvent(this)))return;this.content.setStyle({display:this._oldContentDisplay}),this.minimizeBar.element.removeChild(this.element),document.body.appendChild(this.element);const t=this.getMinimizePos();this.setStyle({position:"absolute",left:h.addPx(t.x),top:h.addPx(t.y)}),this.windowBar.unminimize(),this._minimized=!1,this.updateElement(),setTimeout(()=>{this.setStyle({transition:"all 0.05s ease"}),e&&e()},600)}clearMouseState(){this.resizeHandler.clearMouseState(),this.windowBar.clearMouseState()}updateElement(){const{pos:e,size:t,minimized:n}=this;n||this.setStyle({zIndex:this.focused?"1":"0",left:h.addPx(e.x),top:h.addPx(e.y),width:h.addPx(t.x),height:h.addPx(t.y)})}onMouseEnter(e){0===e.buttons&&this.clearMouseState()}onMouseUp(){this.clearMouseState()}onSelectStart(e){(this.resizing||this.moving)&&e.preventDefault()}onMouseMove(e){this._mousePos={x:e.pageX,y:e.pageY},this.resizeHandler.onMouseMove(e),this.windowBar.onMouseMove(e)}getMinimizePos(){const e=document.createElement("div");this.minimizeBar.element.appendChild(e);const t=e.getBoundingClientRect(),n={x:t.left,y:t.top};return e.remove(),n}hijackElement(e){const t=document.querySelector(e);if(!t)throw new Error("Could not find element for window. Selector: "+e);t.parent&&t.remove();const n=t.cloneNode(!0),i=new m.Div([n]);return t.style="",t.className="",t.innerHTML="",document.body.appendChild(t),this.content=i,t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPx=function(e){return`${e}px`},t.Point=class{static get zero(){return{x:0,y:0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3);t.MinimizeBar=class extends i.Div{constructor(e){super(),e&&(this.element=e),this.element.id="WindowModal-minimizeBar",this.withClassname(this.element.id)}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(2));t.MIN_WINDOW_SIZE=200,t.WindowResizeHandler=class{constructor(e){this.lastResizePos=null,o.default(this),this.window=e,this.wasResizeCursor=!1,window.addEventListener("mousedown",this.onMouseDown)}get resizing(){return Boolean(this.lastResizePos)}destroy(){window.removeEventListener("mousedown",this.onMouseDown)}clearMouseState(){this.lastResizePos=null}onMouseDown(e){if(!e||!this.window.resizable)return;const{window:t}=this,{element:n,focused:i}=t;if(this.getDistanceToResize()<=10)return e.preventDefault(),void this.startResize();const o=n.contains(e.target);o&&!i?t.focused=!0:!o&&i&&(t.focused=!1)}onMouseMove(e){const{minimized:t,resizing:n}=this.window;if(t||!this.window.resizable)return;const{window:i,wasResizeCursor:o}=this;if(this.getDistanceToResize()<10)i.setStyle({cursor:"nw-resize"}),document.body.style.cursor="nw-resize",this.wasResizeCursor=!0;else if(!n&&o){const{body:e}=document;"default"===i.element.style.cursor&&"default"===e.style.cursor||(i.setStyle({cursor:"default"}),e.style.cursor="default"),this.wasResizeCursor=!1}return n?(this.continueResizing(),void e.preventDefault()):void 0}getDistanceToResize(){const{pos:e,size:t,mousePos:n}=this.window,i=e.x+t.x,o=e.y+t.y;return Math.sqrt((n.x-i)**2+(n.y-o)**2)}startResize(){const{window:e}=this;e.focused=!0,this.lastResizePos=Object.assign({},e.mousePos),this.wasResizeCursor=!0,e.updateElement()}continueResizing(){const{window:e,lastResizePos:n}=this,{size:i,mousePos:o}=e;if(!n)return;const s=Object.assign({},o),r={x:i.x+o.x-n.x,y:i.y+o.y-n.y};r.x<t.MIN_WINDOW_SIZE&&(r.x=t.MIN_WINDOW_SIZE,s.x=n.x),r.y<t.MIN_WINDOW_SIZE&&(r.y=t.MIN_WINDOW_SIZE,s.y=n.y),this.lastResizePos=s,e.size=r,e.updateElement()}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(2)),s=n(22),r=n(3),l=n(1),d=n(23);t.WindowBar=class extends l.Component{get moving(){return Boolean(this._moveStartPos)}constructor(e){super(),o.default(this),this.window=e.window,this.hideClose=Boolean(e.hideClose),this.hideMinimize=Boolean(e.hideMinimize),this.compact=Boolean(e.compact),this.element=null,this.icon=null,this.title=null,this.minimizeButton=null,this.closeButton=null,this._moveStartPos=null,this.init(e)}init(e){const{title:t,compact:n}=e;e.icon&&(this.icon=new d.WindowIcon(e.icon));const i=[t||""];this.icon&&i.unshift(this.icon);const o=n?"WindowModal-bar--compact":"";this.title=new r.Div(i).withClassname("WindowModal-title");const s=new r.Div([this.title,(new r.Div).withClassname("WindowModal-bar-spacer"),new r.Div(this.createButtons()).withClassname("WindowModal-buttons")]).withClassname(`WindowModal-bar ${o}`);this.element=s.element,this.element.addEventListener("mousedown",this.onMouseDown)}destroy(){this.element.removeEventListener("mousedown",this.onMouseDown)}clearMouseState(){this._moveStartPos=null}onMouseMove(e){const{moving:t,window:n,_moveStartPos:i}=this;if(!t||!i||!this.window.movable)return;const o=e.pageX,s=e.pageY,r={x:o-i.x,y:s-i.y};n.pos=r,e.preventDefault()}setTitle(e){this.title.element.textContent=e}setIcon(e){this.icon&&this.title.removeChild(this.icon),this.icon=new d.WindowIcon(e),this.title.addChild(this.icon,0)}setCompact(e){const{element:t}=this;if(!e&&this.compact){const e=t.className.replace("WindowModel-bar--compact","");t.className=e}e&&!this.compact&&(t.className+="WindowModel-bar--compact")}setHideClose(e){const t=e?"none":"default";this.closeButton.setStyle({display:t})}setHideMinimize(e){const t=e?"none":"default";this.minimizeButton.setStyle({display:t})}minimize(){this.setStyle({cursor:"default"}),this.minimizeButton.element.textContent="□"}unminimize(){this.setStyle({cursor:"pointer"}),this.minimizeButton.element.textContent="_"}onMouseDown(e){if(!e||0!==e.button||!this.window.movable||this.window.minimized)return;const{pos:t}=this.window;this._moveStartPos={x:e.pageX-t.x,y:e.pageY-t.y}}createButtons(){const e=[],t=(e,t,n)=>{const i=new s.Button([e],t);return n&&(i.element.onclick=n),i};return this.minimizeButton=t("_","minimize",this.window.minimize),e.push(this.minimizeButton),this.setHideMinimize(this.hideMinimize),this.closeButton=t("✖","close",this.window.destroy),e.push(this.closeButton),this.setHideClose(this.hideClose),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.Button=class extends i.Component{constructor(e,t){super(e),this.element=document.createElement("button"),this.withClassname("WindowModal-button"),t&&(this.element.className+=` WindowModal-button--${t}`)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(3);class s extends i.Component{static createIcon(e){if("object"!=typeof e)throw new Error("Invalid 'icon' specified in window-modal settings");const t=" WindowModal-icon";if(e.element)return e.element.parentElement&&e.element.remove(),e.element.className+=t,e.element;if(e.selector){const n=document.querySelector(e.selector);if(!n)throw new Error("Could not find element for window icon: "+e.selector);return n.parentElement&&n.remove(),n.className+=t,n}if(e.innerHTML){const n=(new o.Div).element;return n.innerHTML=e.innerHTML,n.className+=t,n}if(e.src){const n=new Image;return n.src=e.src,n.className+=t,n}return console.warn("Invalid icon given to window: ",e),(new o.Div).withClassname(t).element}constructor(e){super(),this.element=s.createIcon(e)}}t.WindowIcon=s}]).default},function(e,t,n){"use strict";n.r(t),n.d(t,"eventHandlerToName",function(){return l});var i=n(0),o=n.n(i),s=n(1),r=n.n(s);const l={onClose:"close",onMinimize:"minimize",onUnminimize:"unminimize",onFocus:"focus",onBlur:"blur",onResize:"resize",onMove:"move"};t.default=class extends i.Component{constructor(e){super(e),this.elementId="a"+(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)),this.windowModal=null}componentDidMount(){const e=this.props;this.windowModal=new r.a(Object.assign({},this.props,{elementSelector:`#${this.elementId}`})),Object.keys(l).forEach(t=>{const n=e[t],i=l[t];n&&i&&this._addEventListener(i,n)})}componentWillUnmount(){const{windowModal:e}=this,t=this.props;e&&(Object.keys(l).forEach(e=>{const n=t[e],i=l[e];i&&n&&this._removeEventListener(i,n)}),e.destroy())}componentDidUpdate(e){const{windowModal:t}=this,n=this.props;t&&(Object.keys(n).forEach(i=>{if(Object.keys(l).includes(i))return;const o=n[i];o!==e[i]&&(t[i]=o)}),Object.keys(l).forEach(t=>{const i=e[t],o=n[t],s=l[t];s&&o!==i&&(i?this._removeEventListener(s,i):o&&this._addEventListener(s,o))}))}render(){return o.a.createElement("div",{id:this.elementId},this.props.children)}_addEventListener(e,t){const{windowModal:n}=this;n&&n.addEventListener(e,t)}_removeEventListener(e,t){const{windowModal:n}=this;n&&n.removeEventListener(e,t)}}}]).default});